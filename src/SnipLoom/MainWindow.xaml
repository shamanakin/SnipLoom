<Window x:Class="SnipLoom.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SnipLoom" 
        Height="380" 
        Width="520"
        WindowStartupLocation="CenterScreen"
        Background="#1e1e1e">
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="SnipLoom" FontSize="28" FontWeight="SemiBold" Foreground="White"/>
            <TextBlock Text="Lightweight screen video recorder" FontSize="14" Foreground="#888"/>
        </StackPanel>

        <!-- Capture Mode Selection -->
        <Border Grid.Row="1" Background="#252525" CornerRadius="8" Padding="12" Margin="0,0,0,16">
            <StackPanel>
                <TextBlock Text="Capture Mode" FontSize="12" Foreground="#888" Margin="0,0,0,8"/>
                <StackPanel Orientation="Horizontal">
                    <RadioButton x:Name="ModeDisplay" 
                                 Content="Display" 
                                 IsChecked="True"
                                 Foreground="White" 
                                 Margin="0,0,20,0"
                                 GroupName="CaptureMode"
                                 ToolTip="Record an entire monitor"/>
                    <RadioButton x:Name="ModeWindow" 
                                 Content="Window" 
                                 Foreground="White"
                                 Margin="0,0,20,0"
                                 GroupName="CaptureMode"
                                 ToolTip="Record a specific application window"/>
                    <RadioButton x:Name="ModeRegion" 
                                 Content="Draw Region" 
                                 Foreground="White"
                                 GroupName="CaptureMode"
                                 ToolTip="Draw a custom capture area with fixed aspect ratio"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Status Panel with Recording Controls -->
        <Border Grid.Row="2" Background="#2d2d2d" CornerRadius="8" Padding="16" Margin="0,0,0,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock x:Name="StatusText" Text="Ready to record" FontSize="14" FontWeight="SemiBold" Foreground="White"/>
                    <TextBlock x:Name="TimerText" Text="00:00:00" FontSize="24" FontWeight="Light" Foreground="#0078d4" Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Start Button (visible when not recording) -->
                <Button x:Name="StartButton" 
                        Grid.Column="1"
                        Content="Start Recording" 
                        Click="StartButton_Click"
                        Background="#0078d4" 
                        Foreground="White"
                        FontWeight="SemiBold"
                        FontSize="14"
                        Padding="24,12"
                        BorderThickness="0"
                        Cursor="Hand"
                        ToolTip="Begin recording the selected source"/>
                
                <!-- Stop Button (visible when recording) -->
                <Button x:Name="StopButton" 
                        Grid.Column="1"
                        Content="Stop Recording" 
                        Click="StopButton_Click"
                        Visibility="Collapsed"
                        Background="#c42b1c"
                        Foreground="White"
                        FontWeight="SemiBold"
                        FontSize="14"
                        Padding="24,12"
                        BorderThickness="0"
                        Cursor="Hand"
                        ToolTip="Stop recording and save"/>
            </Grid>
        </Border>

        <!-- Last Saved File Panel -->
        <Border Grid.Row="3" Background="#252525" CornerRadius="8" Padding="16">
            <Grid x:Name="LastSavedPanel">
                <!-- Empty state -->
                <StackPanel x:Name="EmptyState" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="No recordings yet" 
                               FontSize="13" 
                               Foreground="#666"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Your last saved file will appear here" 
                               FontSize="11" 
                               Foreground="#555"
                               HorizontalAlignment="Center"
                               Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- File info state (shown after save) -->
                <StackPanel x:Name="FileInfoState" Visibility="Collapsed">
                    <TextBlock Text="Last Saved" FontSize="11" Foreground="#888" Margin="0,0,0,6"/>
                    <TextBlock x:Name="LastFileName" 
                               Text="" 
                               FontSize="13" 
                               FontWeight="SemiBold"
                               Foreground="White"
                               TextTrimming="CharacterEllipsis"/>
                    <TextBlock x:Name="LastFilePath" 
                               Text="" 
                               FontSize="11" 
                               Foreground="#888"
                               TextTrimming="CharacterEllipsis"
                               Margin="0,2,0,8"/>
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="OpenFileBtn"
                                Content="Open File"
                                Click="OpenFile_Click"
                                Background="#444"
                                Foreground="White"
                                Padding="12,6"
                                BorderThickness="0"
                                Cursor="Hand"
                                Margin="0,0,8,0"
                                FontSize="12"/>
                        <Button x:Name="OpenFolderBtn"
                                Content="Open Folder"
                                Click="OpenFolder_Click"
                                Background="#444"
                                Foreground="White"
                                Padding="12,6"
                                BorderThickness="0"
                                Cursor="Hand"
                                FontSize="12"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Footer -->
        <TextBlock Grid.Row="4" 
                   Text="Output: MP4 (H.264/AAC) with system audio" 
                   FontSize="11" 
                   Foreground="#666"
                   Margin="0,12,0,0"/>
    </Grid>
</Window>
